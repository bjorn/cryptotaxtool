import { ListView, HorizontalBox, CheckBox, ComboBox } from "std-widgets.slint";
import { Badge } from "./common.slint";
import { Facade } from "./global.slint";
import { UiTransactionSource } from "./structs.slint";

export component Sources inherits ListView {
    in property <[UiTransactionSource]> sources: Facade.sources;

    for source[index] in sources: HorizontalBox {
        CheckBox {
            checked: source.enabled;
            text: source.name;

            toggled => {
                source.enabled = self.checked;
                Facade.set-source-enabled(index, self.checked);
            }
        }
        Text {
            text: source.path;
            vertical-alignment: center;
        }
        Rectangle { width: 1px; }
        Badge {
            text: "\{source.transaction-count} transactions";
            opacity: 0.8;
        }
        Rectangle {}
        ComboBox {
            model: Facade.source-types;
            horizontal-stretch: 0;
            current-value: source.source_type;
            enabled: false;
        }
    }
}
